(()=>{"use strict";const t="active",e=document.querySelectorAll(".div-clocks [data-type]"),a=document.querySelector("[data-start-timer]"),n=document.querySelector("[data-progress-bar]"),o=document.querySelector(".activate-pomodoro"),s=document.querySelector("[data-choose]"),c=document.querySelectorAll(".select-time [data-value]"),r=t=>document.querySelector(`[data-timer-type="${t}"]`),i=(document.querySelectorAll("[data-toggle-drop]"),document.querySelectorAll("[data-drop] li"));document.querySelectorAll("[data-arrow]");let l=null;function d(t){t&&(l&&l.currentTime>0&&(l.pause(),l.currentTime=0),l=new Audio(t),l.play())}const u=document.getElementById("task"),m=document.querySelector("textarea"),g=document.querySelector("[data-notes]"),v=document.querySelector("[data-add-tasks]"),p=document.querySelector(".inputTasks"),S=document.querySelector(".menu-clean-tasks"),f=document.querySelector(".menu-clean-tasks [data-remove-all]"),L=document.querySelector(".menu-clean-tasks [data-completed]"),y=(document.querySelector(".activedDivDropDown"),document.querySelector("[data-count]"));let h=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(h=t)}catch(t){console.error("Erro ao ler taskData",t)}function E(t=h){p.innerHTML="",t.forEach(((t,e)=>{const a=k(t.title,t.note,e,t.done);p.appendChild(a)})),A()}function k(t,e,a){const n=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),o=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),s=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),c=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./images/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),r=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),i=function(t,e){const a=document.createElement("div");return a.classList.add("activatedDivCheckBox"),a.setAttribute("role","checkbox"),a.setAttribute("aria-checked",h[t]?.done),h[t]?.done&&(a.classList.add("alternateStateCheckbox"),e.classList.add("alternateStateParagraph")),a.addEventListener("click",(()=>{a.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),h[t].done=a.classList.contains("alternateStateCheckbox"),function(){const t=h.every((t=>t.done));h.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),h.length=0,localStorage.setItem("tasksData",JSON.stringify([])),E()}),500)}(),function(){const t=[...h].sort(((t,e)=>t.done-e.done));h.length=0,h.push(...t),localStorage.setItem("tasksData",JSON.stringify(h)),E()}(),localStorage.setItem("tasksData",JSON.stringify(h))})),a}(a,o);return function(t,e,a,n,o,s){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),a=t.target;e&&e&&!e.contains(a)&&(q(e),x())})),t.addEventListener("click",(c=>{c.stopPropagation(),t.classList.toggle("scale-effect");const r=document.querySelector(".activedDivDropDown");if(r)return void q(r);const i=document.createElement("div");i.classList.add("activedDivDropDown");const l=t.getBoundingClientRect();i.style.position="absolute",i.style.top=`${l.bottom+window.scrollY}px`;const[d,u,m]=function(t,e,a,n,o,s,c){const r=document.createElement("span");r.classList.add("edit"),r.innerText="Editar";const i=document.createElement("div");i.classList.add("divListEdit");const l=document.createElement("button");return l.type="button",l.classList.add("activatedButtonSave"),l.innerText="Salvar",i.appendChild(r),i.addEventListener("click",(()=>{const r=document.createElement("input");r.type="text",r.classList.add("activatedInputTasks"),r.value=h[t].title;const i=document.createElement("input");i.type="text",i.classList.add("activatedInputNote"),i.value=h[t].note,e.replaceWith(r),a.replaceWith(i),c.insertAdjacentElement("beforeend",l),q(o,n),l.addEventListener("click",(()=>{if(h[t].title=r.value,h[t].note=i.value,!h[t].title)return;localStorage.setItem("tasksData",JSON.stringify(h));const e=k(h[t].title,h[t].note,t);s.replaceWith(e),E()}))})),[r,i,l]}(e,a,n,t,i,o,s),[g,v]=function(t,e){const a=document.createElement("span");a.classList.add("remove"),a.innerText="Remover";const n=document.createElement("div");return n.classList.add("divListRemove"),n.appendChild(a),n.addEventListener("click",(()=>{h.splice(t,1),q(e),localStorage.setItem("tasksData",JSON.stringify(h)),E(),A()})),[a,n]}(e,i);i.append(u,v),document.body.appendChild(i)}))}(c,a,o,s,n,r),r.append(i,o,c),n.append(r),e&&n.appendChild(s),n}function q(t,e){t?.remove(),e?.remove()}function x(){document.querySelectorAll(".scale-effect").forEach((t=>{t.classList.remove("scale-effect")}))}function T(e){const a=e.classList.contains(t);e.classList.toggle(t,!a),e.classList.toggle("removeMenu",a)}function A(){y.innerText=h.length}const b=document.querySelector(".modal"),D=document.querySelector(".configs"),I=document.querySelector(".menu-clean-tasks"),C=document.querySelectorAll("[data-img-close]"),w=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),O=document.querySelector(".add-list-tasks"),N=document.querySelector("[data-img-close='tasks']"),J=[b,D,I],R=e=>{e&&e.preventDefault(),e.stopPropagation();const a=e.target;if(a.hasAttribute("data-modal")&&b.classList.add(t),a.hasAttribute("data-config")){D.classList.add(t),P();const e=window.matchMedia("(max-width: 1440px)");D.style.overflowY=e.matches?"scroll":"hidden"}a.closest("[data-menu]")&&(I.classList.toggle(t),w[2].classList.toggle("scale-effect"))},$=e=>{const a=e.target.dataset.imgClose;"modal"===a?b.classList.remove(t):"configs"===a?D.classList.remove(t):(O.classList.remove(t),N.classList.toggle(t))},P=()=>{document.querySelector("[data-close-configs]").addEventListener("click",(()=>{D.classList.remove(t)}),{once:!0})};!function(){const e=document.querySelector("[data-img-close='tasks']"),a=document.querySelector(".add-list-tasks");document.querySelector(".tasks").addEventListener("click",(()=>{a.classList.toggle(t),e.classList.toggle(t)}))}(),function(){let l=JSON.parse(localStorage.getItem("timers"))||[];const u={pomodoro:"25:00",short:"05:00",long:"15:00"},m={totalSeconds:0,tempoInicial:0,isRunning:!1,interval:null};let g=null;i.forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.dataset.music;e&&(g=e)}))})),c.forEach((t=>{t.addEventListener("input",(t=>{const e=t.target.dataset.value.replace("Timer",""),a=t.target.value;if(!a.trim())return;u[e]=`${a.toString().padStart(2,"0")}:00`;const n=r(e);l.push({...u}),localStorage.setItem("timers",JSON.stringify(l)),n&&!n.classList.contains("hidden")&&(n.innerText=u[e])})),function(){const t=l[l.length-1];for(let e in t){const a=r(e);a&&(a.innerText=t[e],u[e]=t[e])}}()}));const v=["pomodoro","short"];let p=0;function S(a){const n="string"==typeof a?a:a.target.dataset.type,o=r(n);if(e.forEach((e=>e.classList.remove(t))),"string"!=typeof a)a.target.classList.add(t);else{const e=(t=>document.querySelector(`[data-type=${t}]`))(n);e&&e.classList.add(t)}if(document.querySelectorAll("[data-timer]").forEach((t=>t.classList.add("hidden"))),o){o.classList.remove("hidden"),o.innerText=u[n];const t=document.body;"pomodoro"===n?t.style.backgroundColor="var(--tomato)":"short"===n?t.style.backgroundColor="var(--backgroundShortBreak)":"long"===n&&(t.style.backgroundColor="var(--backgroundLongBreak)")}}!function(){const e=JSON.parse(localStorage.getItem("state"));e&&(o.classList.toggle(t,e.divChooseActive),s.classList.toggle(t,e.chooseActive))}(),o.addEventListener("click",(function(){o.classList.toggle(t),s.classList.toggle(t);const e={divChooseActive:o.classList.contains(t),chooseActive:s.classList.contains(t)};localStorage.setItem("state",JSON.stringify(e))})),a.addEventListener("click",(function(){const e=document.querySelector("[data-timer]:not(.hidden)"),s=e.dataset.timerType,c=u[s];if(!m.isRunning&&0===m.totalSeconds){const[t,a]=e.innerText.split(":").map(Number);m.totalSeconds=60*t+a,m.tempoInicial=m.totalSeconds}m.isRunning?(m.isRunning=!1,clearInterval(m.interval),a.innerText="COMEÇAR",a.classList.remove(t)):(m.isRunning=!0,a.innerText="PAUSAR",a.classList.add(t),a.classList.remove("special-class"),m.interval=setInterval((()=>{if(m.totalSeconds<=0)return m.isRunning=!1,a.innerText="COMEÇAR",n.style.width="0",e.innerText=c,clearInterval(m.interval),o.classList.contains(t)&&(p++,p=p>=v.length?0:p,S(v[p]),a.classList.add("special-class")),void(g&&d(g));const s=(m.tempoInicial-m.totalSeconds)/m.tempoInicial*100;n.style.width=`${s}%`,m.totalSeconds--;const r=Math.floor(m.totalSeconds/60),i=m.totalSeconds%60;e.innerText=`${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}),50))})),e.forEach((t=>t.addEventListener("click",S))),e.length&&e[0].classList.add(t)}(),function(){const e=JSON.parse(localStorage.getItem("dropdownTexts"))||{};i.forEach((a=>{a.addEventListener("click",(a=>{const n=a.target,o=n.closest("[data-drop]");if(!o)return;const s=o.getAttribute("data-drop"),c=document.querySelector(`[data-toggle-drop="${s}"]`);if(!c)return;const r=c?.querySelector(".format-innerText");r&&(r.innerText=a.currentTarget.innerText);const i=n.dataset.music;void 0!==i&&""!==i&&d(i),document.querySelectorAll("[data-drop]").forEach((e=>{e.classList.contains(t)&&e.classList.remove(t)})),e[s]=r.innerText,localStorage.setItem("dropdownTexts",JSON.stringify(e))})),Object.entries(e).forEach((([t,e])=>{const a=document.querySelector(`[data-toggle-drop="${t}"]`);if(!a)return;const n=a.querySelector(".format-innerText");n&&(n.innerText=e)}))})),document.addEventListener("click",(e=>{let a=!1;document.querySelectorAll("[data-toggle-drop], [data-drop]").forEach((t=>{t.contains(e.target)&&(a=!0)})),a||document.querySelectorAll("[data-drop]").forEach((e=>{e.classList.remove(t)}))})),document.addEventListener("click",(e=>{const a=e.target.closest(".activeDropDownChoose");if(!a)return;const n=a.getAttribute("data-toggle-drop"),o=document.querySelector(`[data-drop="${n}"]`);o&&o.classList.toggle(t)}))}(),E(),g.addEventListener("click",(function(){m.classList.toggle(t)})),v.addEventListener("click",(function(){const t=u.value.trim(),e=m.value.trim();if(!t)return;const a={title:t,note:e,done:!1};h.push(a),localStorage.setItem("tasksData",JSON.stringify(h)),E(),u.value="",m.value=""})),f.addEventListener("click",(()=>(h.length=0,localStorage.setItem("tasksData",JSON.stringify(h)),T(S),x(),void E()))),L.addEventListener("click",(()=>function(){const t=h.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),h.length=0,h.push(...t),T(S),x(),E()}())),document.addEventListener("click",(e=>{const a=e.target;J.forEach(((e,n)=>{a===e&&n<2&&e.classList.remove(t),2!==n||e.contains(a)||(e.classList.remove(t),w[2].classList.remove("scale-effect"))}))})),w.forEach((t=>t.addEventListener("click",R))),C.forEach((t=>t.addEventListener("click",$)))})();