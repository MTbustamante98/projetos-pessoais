(()=>{"use strict";const t="active",e=document.querySelectorAll(".div-clocks [data-type]"),n=document.querySelector("[data-start-timer]"),a=document.querySelector("[data-progress-bar]"),o=document.querySelector(".activate-pomodoro"),c=document.querySelector("[data-choose]"),s=document.querySelectorAll(".select-time [data-value]"),r=t=>document.querySelector(`[data-timer-type="${t}"]`),l=(document.querySelectorAll("[data-toggle-drop]"),document.querySelectorAll("[data-drop] li")),i=document.querySelectorAll(".alarm-sound-menu li"),d=document.querySelectorAll(".alarm-ticking-menu li"),u=document.querySelector('[data-count="volume"]'),m=document.querySelector('[data-count="ticking"]'),g=document.querySelector("#volume-alarm"),v=document.querySelector("#volume-ticking");document.querySelectorAll("[data-arrow]");let p=null,S=null,f=null;function y(t,e){t&&(p&&(p.pause(),p.currentTime=0),p=new Audio(t),S=e,p.volume=k(e),p.play())}function L(){return p}function h(){return S}function k(t){const e=document.querySelector(`#volume-${t}`);return e?e.value/100:1}const E=document.getElementById("task"),q=document.querySelector("textarea"),x=document.querySelector("[data-notes]"),A=document.querySelector("[data-add-tasks]"),T=document.querySelector(".inputTasks"),b=document.querySelector(".menu-clean-tasks"),D=document.querySelector(".menu-clean-tasks [data-remove-all]"),I=document.querySelector(".menu-clean-tasks [data-completed]"),C=(document.querySelector(".activedDivDropDown"),document.querySelector("[data-count]"));let N=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(N=t)}catch(t){console.error("Erro ao ler taskData",t)}function O(t=N){T.innerHTML="",t.forEach(((t,e)=>{const n=w(t.title,t.note,e,t.done);T.appendChild(n)})),P()}function w(t,e,n){const a=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),o=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),c=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),s=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./images/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),r=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),l=function(t,e){const n=document.createElement("div");return n.classList.add("activatedDivCheckBox"),n.setAttribute("role","checkbox"),n.setAttribute("aria-checked",N[t]?.done),N[t]?.done&&(n.classList.add("alternateStateCheckbox"),e.classList.add("alternateStateParagraph")),n.addEventListener("click",(()=>{n.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),N[t].done=n.classList.contains("alternateStateCheckbox"),function(){const t=N.every((t=>t.done));N.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),N.length=0,localStorage.setItem("tasksData",JSON.stringify([])),O()}),500)}(),function(){const t=[...N].sort(((t,e)=>t.done-e.done));N.length=0,N.push(...t),localStorage.setItem("tasksData",JSON.stringify(N)),O()}(),localStorage.setItem("tasksData",JSON.stringify(N))})),n}(n,o);return function(t,e,n,a,o,c){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),n=t.target;e&&e&&!e.contains(n)&&(J(e),R())})),t.addEventListener("click",(s=>{s.stopPropagation(),t.classList.toggle("scale-effect");const r=document.querySelector(".activedDivDropDown");if(r)return void J(r);const l=document.createElement("div");l.classList.add("activedDivDropDown");const i=t.getBoundingClientRect();l.style.position="absolute",l.style.top=`${i.bottom+window.scrollY}px`;const[d,u,m]=function(t,e,n,a,o,c,s){const r=document.createElement("span");r.classList.add("edit"),r.innerText="Editar";const l=document.createElement("div");l.classList.add("divListEdit");const i=document.createElement("button");return i.type="button",i.classList.add("activatedButtonSave"),i.innerText="Salvar",l.appendChild(r),l.addEventListener("click",(()=>{const r=document.createElement("input");r.type="text",r.classList.add("activatedInputTasks"),r.value=N[t].title;const l=document.createElement("input");l.type="text",l.classList.add("activatedInputNote"),l.value=N[t].note,e.replaceWith(r),n.replaceWith(l),s.insertAdjacentElement("beforeend",i),J(o,a),i.addEventListener("click",(()=>{if(N[t].title=r.value,N[t].note=l.value,!N[t].title)return;localStorage.setItem("tasksData",JSON.stringify(N));const e=w(N[t].title,N[t].note,t);c.replaceWith(e),O()}))})),[r,l,i]}(e,n,a,t,l,o,c),[g,v]=function(t,e){const n=document.createElement("span");n.classList.add("remove"),n.innerText="Remover";const a=document.createElement("div");return a.classList.add("divListRemove"),a.appendChild(n),a.addEventListener("click",(()=>{N.splice(t,1),J(e),localStorage.setItem("tasksData",JSON.stringify(N)),O(),P()})),[n,a]}(e,l);l.append(u,v),document.body.appendChild(l)}))}(s,n,o,c,a,r),r.append(l,o,s),a.append(r),e&&a.appendChild(c),a}function J(t,e){t?.remove(),e?.remove()}function R(){document.querySelectorAll(".scale-effect").forEach((t=>{t.classList.remove("scale-effect")}))}function $(e){const n=e.classList.contains(t);e.classList.toggle(t,!n),e.classList.toggle("removeMenu",n)}function P(){C.innerText=N.length}const B=document.querySelector(".modal"),M=document.querySelector(".configs"),W=document.querySelector(".menu-clean-tasks"),j=document.querySelectorAll("[data-img-close]"),Y=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),H=document.querySelector(".add-list-tasks"),U=document.querySelector("[data-img-close='tasks']"),z=[B,M,W],F=e=>{e&&e.preventDefault(),e.stopPropagation();const n=e.target;if(n.hasAttribute("data-modal")&&B.classList.add(t),n.hasAttribute("data-config")){M.classList.add(t),K();const e=window.matchMedia("(max-width: 1440px)");M.style.overflowY=e.matches?"scroll":"hidden"}n.closest("[data-menu]")&&(W.classList.toggle(t),Y[2].classList.toggle("scale-effect"))},G=e=>{const n=e.target.dataset.imgClose;"modal"===n?B.classList.remove(t):"configs"===n?M.classList.remove(t):(H.classList.remove(t),U.classList.toggle(t))},K=()=>{document.querySelector("[data-close-configs]").addEventListener("click",(()=>{M.classList.remove(t)}),{once:!0})};!function(){const e=document.querySelector("[data-img-close='tasks']"),n=document.querySelector(".add-list-tasks");document.querySelector(".tasks").addEventListener("click",(()=>{n.classList.toggle(t),e.classList.toggle(t)}))}(),function(){let l=JSON.parse(localStorage.getItem("timers"))||[];const u={pomodoro:"25:00",short:"05:00",long:"15:00"};let m=null,g=null;i.forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.dataset.music;e&&(m=e)}))})),d.forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.dataset.music;e&&(g=e)}))}));const v={totalSeconds:0,tempoInicial:0,isRunning:!1,interval:null};s.forEach((t=>{t.addEventListener("input",(t=>{const e=t.target.dataset.value.replace("Timer",""),n=t.target.value;if(!n.trim())return;u[e]=`${n.toString().padStart(2,"0")}:00`;const a=r(e);l.push({...u}),localStorage.setItem("timers",JSON.stringify(l)),a&&!a.classList.contains("hidden")&&(a.innerText=u[e])})),function(){const t=l[l.length-1];for(let e in t){const n=r(e);n&&(n.innerText=t[e],u[e]=t[e])}}()}));const S=["pomodoro","short"];let L=0;function h(n){const a="string"==typeof n?n:n.target.dataset.type,o=r(a);if(e.forEach((e=>e.classList.remove(t))),"string"!=typeof n)n.target.classList.add(t);else{const e=(t=>document.querySelector(`[data-type=${t}]`))(a);e&&e.classList.add(t)}if(document.querySelectorAll("[data-timer]").forEach((t=>t.classList.add("hidden"))),o){o.classList.remove("hidden"),o.innerText=u[a];const t=document.body;"pomodoro"===a?t.style.backgroundColor="var(--tomato)":"short"===a?t.style.backgroundColor="var(--backgroundShortBreak)":"long"===a&&(t.style.backgroundColor="var(--backgroundLongBreak)")}}!function(){const e=JSON.parse(localStorage.getItem("state"));e&&(o.classList.toggle(t,e.divChooseActive),c.classList.toggle(t,e.chooseActive))}(),o.addEventListener("click",(function(){o.classList.toggle(t),c.classList.toggle(t);const e={divChooseActive:o.classList.contains(t),chooseActive:c.classList.contains(t)};localStorage.setItem("state",JSON.stringify(e))})),n.addEventListener("click",(function(){const e=document.querySelector("[data-timer]:not(.hidden)"),c=e.dataset.timerType,s=u[c];if(!v.isRunning&&0===v.totalSeconds){const[t,n]=e.innerText.split(":").map(Number);v.totalSeconds=60*t+n,v.tempoInicial=v.totalSeconds}var r;v.isRunning?(v.isRunning=!1,clearInterval(v.interval),n.innerText="COMEÇAR",n.classList.remove(t)):(v.isRunning=!0,n.innerText="PAUSAR",n.classList.add(t),n.classList.remove("special-class"),v.totalSeconds>0&&g&&(r=g)&&(f&&(f.pause(),f.currentTime=0),f=new Audio(r),f.loop=!0,p.volume=k("ticking"),f.play()),v.interval=setInterval((()=>{if(v.totalSeconds<=0)return v.isRunning=!1,n.innerText="COMEÇAR",n.classList.remove(t),a.style.width="0",e.innerText=s,clearInterval(v.interval),o.classList.contains(t)&&(L++,L=L>=S.length?0:L,h(S[L]),n.classList.add("special-class")),m&&y(m,"alarm"),void(f&&(f.pause(),f.currentTime=0));const c=(v.tempoInicial-v.totalSeconds)/v.tempoInicial*100;a.style.width=`${c}%`,v.totalSeconds--;const r=Math.floor(v.totalSeconds/60),l=v.totalSeconds%60;e.innerText=`${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`}),50))})),e.forEach((t=>t.addEventListener("click",h))),e.length&&e[0].classList.add(t)}(),function(){const e=JSON.parse(localStorage.getItem("dropdownTexts"))||{};function n(){const t=localStorage.getItem("volumes");return t?JSON.parse(t):{alarm:100,ticking:100}}function a(t,e){const a=n();a[t]=e,localStorage.setItem("volumes",JSON.stringify(a))}l.forEach((n=>{n.addEventListener("click",(n=>{const a=n.target,o=a.closest("[data-drop]");if(!o)return;const c=o.getAttribute("data-drop"),s=document.querySelector(`[data-toggle-drop="${c}"]`);if(!s)return;const r=s?.querySelector(".format-innerText");r&&(r.innerText=n.currentTarget.innerText);const l=a.dataset.music,i="alarm-sound"===a.closest("[data-drop]").dataset.drop?"alarm":"ticking";void 0!==l&&""!==l&&y(l,i),document.querySelectorAll("[data-drop]").forEach((e=>{e.classList.contains(t)&&e.classList.remove(t)})),e[c]=r.innerText,localStorage.setItem("dropdownTexts",JSON.stringify(e))})),Object.entries(e).forEach((([t,e])=>{const n=document.querySelector(`[data-toggle-drop="${t}"]`);if(!n)return;const a=n.querySelector(".format-innerText");a&&(a.innerText=e)}))})),document.addEventListener("click",(e=>{let n=!1;document.querySelectorAll("[data-toggle-drop], [data-drop]").forEach((t=>{t.contains(e.target)&&(n=!0)})),n||document.querySelectorAll("[data-drop]").forEach((e=>{e.classList.remove(t)}))})),document.addEventListener("click",(e=>{const n=e.target.closest(".activeDropDownChoose");if(!n)return;const a=n.getAttribute("data-toggle-drop"),o=document.querySelector(`[data-drop="${a}"]`);o&&o.classList.toggle(t)})),g.addEventListener("input",(()=>{const t=Number(g.value);if(u.textContent=g.value,a("alarm",t),"alarm"===h()){const t=L(),e=g.value/100;t&&(t.volume=e)}})),v.addEventListener("input",(()=>{const t=Number(v.value);if(m.textContent=v.value,a("ticking",t),"ticking"===h()){const t=L(),e=v.value/100;t&&(t.volume=e)}}));const o=n();g.value=o.alarm,u.textContent=o.alarm,v.value=o.ticking,m.textContent=o.ticking}(),O(),x.addEventListener("click",(function(){q.classList.toggle(t)})),A.addEventListener("click",(function(){const t=E.value.trim(),e=q.value.trim();if(!t)return;const n={title:t,note:e,done:!1};N.push(n),localStorage.setItem("tasksData",JSON.stringify(N)),O(),E.value="",q.value=""})),D.addEventListener("click",(()=>(N.length=0,localStorage.setItem("tasksData",JSON.stringify(N)),$(b),R(),void O()))),I.addEventListener("click",(()=>function(){const t=N.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),N.length=0,N.push(...t),$(b),R(),O()}())),document.addEventListener("click",(e=>{const n=e.target;z.forEach(((e,a)=>{n===e&&a<2&&e.classList.remove(t),2!==a||e.contains(n)||(e.classList.remove(t),Y[2].classList.remove("scale-effect"))}))})),Y.forEach((t=>t.addEventListener("click",F))),j.forEach((t=>t.addEventListener("click",G)))})();