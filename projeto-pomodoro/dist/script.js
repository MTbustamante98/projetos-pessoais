(()=>{const t=document.querySelector(".modal"),e=document.querySelector(".configs"),n=document.querySelector(".menu"),a=document.querySelector(".add-list-tasks"),o=document.querySelector(".tasks"),c=document.querySelectorAll("[data-img-close]"),s=document.querySelector("[data-img-close='tasks']"),r=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),i=document.querySelectorAll(".div-clocks [data-type]"),l=document.body,d=[t,e,n],u="active",m="hidden";!function(){function o(a){a&&a.preventDefault(),a.stopPropagation();const o=a.target;if(o.hasAttribute("data-modal")&&t.classList.add(u),o.hasAttribute("data-config")){e.classList.add(u),l();const t=window.matchMedia("(max-width: 1440px)");e.style.overflowY=t.matches?"scroll":"hidden"}o.closest("data-menu")&&(n.classList.toggle(u),r[2].classList.toggle("scale-effect"))}function i(n){const o=n.target.dataset.imgClose;"modal"===o?t.classList.remove(u):"configs"===o?e.classList.remove(u):(a.classList.remove(u),s.classList.toggle(u))}const l=()=>{document.querySelector("[data-close-configs]").addEventListener("click",(()=>{e.classList.remove(u)}),{once:!0})};r.forEach((t=>t.addEventListener("click",o))),document.addEventListener("click",(function(t){const e=t.target;d.forEach(((t,n)=>{e===t&&n<2&&t.classList.remove(u),2!==n||t.contains(e)||(t.classList.remove(u),r[2].classList.remove("scale-effect"))}))})),c.forEach((t=>t.addEventListener("click",i)))}(),function(){const t=document.querySelector("[data-img-close='tasks']");o.addEventListener("click",(function(){a.classList.toggle("active"),t.classList.toggle("active")}))}(),function(){let t=JSON.parse(localStorage.getItem("timers"))||[];const e={pomodoro:"25:00",short:"05:00",long:"15:00"},n=document.querySelector("[data-timer]:not(.hidden)"),a=document.querySelector("[data-start-timer]"),o={totalSeconds:0,tempoInicial:0,isRunning:!1,interval:null};document.querySelectorAll(".select-time [data-value]").forEach((n=>{n.addEventListener("input",(n=>{const a=n.target.dataset.value,o=n.target.value,c=a.replace("Timer","");if(!o.trim())return!1;e[c]=`${o.toString().padStart(2,"0")}:00`;const s=document.querySelector(`[data-timer-type="${c}"]`);t.push({...e}),localStorage.setItem("timers",JSON.stringify(t)),s&&!s.classList.contains(m)&&(s.innerText=e[c])})),function(){const n=t[t.length-1];for(let t in n){const a=document.querySelector(`[data-timer-type="${t}"]`);a&&(a.innerText=n[t],e[t]=n[t])}}()}));const c=document.querySelector(".activate-pomodoro"),s=["pomodoro","short"];let r=0;function d(t){const n="string"==typeof t?t:t.target.dataset.type,a=document.querySelector(`[data-timer-type="${n}"]`);if(i.forEach((t=>t.classList.remove(u))),"string"!=typeof t)t.target.classList.add(u);else{const t=document.querySelector(`[data-type=${n}]`);t&&t.classList.add(u)}document.querySelectorAll("[data-timer]").forEach((t=>{t.classList.add(m)})),a&&(a.classList.remove(m),a.innerText=e[n],"pomodoro"===n?l.style.backgroundColor="var(--tomato)":"short"===n?l.style.backgroundColor="var(--backgroundShortBreak)":"long"===n&&(l.style.backgroundColor="var(--backgroundLongBreak)"))}c.addEventListener("click",(function(t){const e=document.querySelector("[data-choose]");t.target&&(c.classList.toggle(u),e.classList.toggle(u))})),i.length&&i[0].classList.add(u),i.forEach((t=>t.addEventListener("click",d))),a.addEventListener("click",(function t(i){const l=document.querySelector("[data-progress-bar]"),m=n.dataset.timerType,g=e[m];if(!o.isRunning&&0===o.totalSeconds){const[t,e]=n.innerText.split(":").map(Number);o.totalSeconds=60*t+e,o.tempoInicial=o.totalSeconds}o.isRunning?(o.isRunning=!1,clearInterval(o.interval),a.innerText="INICIAR",a.classList.remove(u)):(o.isRunning=!0,a.innerText="PAUSAR",a.classList.add(u),o.interval=setInterval((()=>{if(o.totalSeconds<=0)return o.isRunning=!1,a.innerText="INICIAR",l.style.width="0",n.innerText=g,clearInterval(o.interval),void(c.classList.contains(u)&&(r++,r>=s.length&&(r=0),d(s[r]),t()));const e=(o.tempoInicial-o.totalSeconds)/o.tempoInicial*100;l.style.width=`${e}%`,o.totalSeconds--;const i=Math.floor(o.totalSeconds/60),m=o.totalSeconds%60;n.innerText=`${i.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`}),50))}))}();let g=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(g=t)}catch(t){console.error("Erro ao ler taskData",t)}!function(){const t=document.getElementById("task"),e=document.querySelector("textarea"),a=document.querySelector("[data-notes]"),o=document.querySelector("[data-add-tasks]"),c=document.querySelector(".inputTasks");function s(t=g){c.innerHTML="",t.forEach(((t,e)=>{const n=r(t.title,t.note,e,t.done);c.appendChild(n)})),l()}function r(t,e,n){const a=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),o=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),c=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),u=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./images/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),m=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),v=function(t,e){const n=document.createElement("div");return n.classList.add("activatedDivCheckBox"),n.setAttribute("role","checkbox"),n.setAttribute("aria-checked",g[t]?.done),g[t]?.done&&(n.setAttribute("aria-checked",n.classList.add("alternateStateCheckbox")),e.classList.add("alternateStateParagraph")),n.addEventListener("click",(()=>{n.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),g[t].done=n.classList.contains("alternateStateCheckbox"),function(){const t=g.every((t=>t.done));g.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),g.length=0,localStorage.setItem("tasksData",JSON.stringify([])),s()}),500)}(),function(){const t=[...g].sort(((t,e)=>t.done-e.done));g.length=0,g.push(...t),localStorage.setItem("tasksData",JSON.stringify(g)),s()}(),localStorage.setItem("tasksData",JSON.stringify(g))})),n}(n,o);return function(t,e,n,a,o,c){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),n=t.target;e&&e&&!e.contains(n)&&(i(e),d())})),t.addEventListener("click",(d=>{const u=document.querySelector(".activedDivDropDown");if(d.stopPropagation(),t.classList.toggle("scale-effect"),u)i(u);else{const d=document.createElement("div");d.classList.add("activedDivDropDown");const u=t.getBoundingClientRect();d.style.position="absolute",d.style.top=`${u.bottom+window.scrollY}px`;const[m,v,p]=function(t,e,n,a,o,c,l){const d=document.createElement("span");d.classList.add("edit"),d.innerText="Editar";const u=document.createElement("div");u.classList.add("divListEdit");const m=document.createElement("button");return m.type="button",m.classList.add("activatedButtonSave"),m.innerText="Salvar",u.appendChild(d),u.addEventListener("click",(()=>{const d=document.createElement("input");d.type="text",d.classList.add("activatedInputTasks"),d.value=g[t].title;const u=document.createElement("input");u.type="text",u.classList.add("activatedInputNote"),u.value=g[t].note,e.replaceWith(d),n.replaceWith(u),l.insertAdjacentElement("beforeend",m),i(o,a),m.addEventListener("click",(()=>{if(g[t].title=d.value,g[t].note=u.value,!g[t].title)return;localStorage.setItem("tasksData",JSON.stringify(g));const e=r(g[t].title,g[t].note,t);c.replaceWith(e),s()}))})),[d,u,m]}(e,n,a,t,d,o,c),[f,S]=function(t,e){const n=document.createElement("span");n.classList.add("remove"),n.innerText="Remover";const a=document.createElement("div");return a.classList.add("divListRemove"),a.appendChild(n),a.addEventListener("click",(()=>{g.splice(t,1),i(e),localStorage.setItem("tasksData",JSON.stringify(g)),s(),l()})),[n,a]}(e,d);d.append(v,S),document.body.appendChild(d)}}))}(u,n,o,c,a,m),m.append(v,o,u),a.append(m),e&&a.appendChild(c),a}const i=(t,e)=>{t?.remove(),e?.remove()};function l(){document.querySelector("[data-count]").innerText=g.length}function d(){document.querySelectorAll(".scale-effect").forEach((t=>{t.classList.remove("scale-effect")}))}function m(t){const e=t.classList.contains("active");t.classList.toggle("active",!e),t.classList.toggle("removeMenu",e)}a.addEventListener("click",(function(){e.classList.toggle(u)})),o.addEventListener("click",(function(){const n=t.value.trim(),a=e.value.trim();if(!n)return;const o={title:n,note:a,done:!1};g.push(o),localStorage.setItem("tasksData",JSON.stringify(g)),s(),t.value="",e.value=""})),document.querySelector(".menu [data-completed]").addEventListener("click",(()=>{const t=g.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),g.length=0,g.push(...t),m(n),d(),s()})),document.querySelector(".menu [data-remove-all]").addEventListener("click",(()=>{g.length=0,localStorage.setItem("tasksData",JSON.stringify(g)),m(n),d(),s()})),s()}()})();