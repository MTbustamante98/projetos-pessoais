document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".modal"),e=document.querySelector(".configs"),a=document.querySelector(".menu"),n=document.querySelector(".add-list-tasks"),o=document.querySelector(".tasks"),c=document.querySelectorAll("[data-img-close]"),s=document.querySelector("[data-img-close='tasks']"),r=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),i=document.querySelectorAll(".div-clocks [data-type]"),l=document.body,d=[t,e,a],u="active",m="hidden";!function(){function o(n){n&&n.preventDefault(),n.stopPropagation();const o=n.target;if(o.hasAttribute("data-modal")&&t.classList.add(u),o.hasAttribute("data-config")){e.classList.add(u),l();const t=window.matchMedia("(max-width: 1440px)");e.style.overflowY=t.matches?"scroll":"hidden"}o.closest("[data-menu]")&&(a.classList.toggle(u),r[2].classList.toggle("scale-effect"))}function i(a){const o=a.target.dataset.imgClose;"modal"===o?t.classList.remove(u):"configs"===o?e.classList.remove(u):(n.classList.remove(u),s.classList.toggle(u))}const l=()=>{document.querySelector("[data-close-configs]").addEventListener("click",(()=>{e.classList.remove(u)}),{once:!0})};document.addEventListener("click",(function(t){const e=t.target;d.forEach(((t,a)=>{e===t&&a<2&&t.classList.remove(u),2!==a||t.contains(e)||(t.classList.remove(u),r[2].classList.remove("scale-effect"))}))})),r.forEach((t=>t.addEventListener("click",o))),c.forEach((t=>t.addEventListener("click",i)))}(),function(){const t=document.querySelector("[data-img-close='tasks']");o.addEventListener("click",(function(){n.classList.toggle("active"),t.classList.toggle("active")}))}(),function(){let t=JSON.parse(localStorage.getItem("timers"))||[];const e={pomodoro:"25:00",short:"05:00",long:"15:00"},a=document.querySelector("[data-start-timer]"),n={totalSeconds:0,tempoInicial:0,isRunning:!1,interval:null};document.querySelectorAll(".select-time [data-value]").forEach((a=>{a.addEventListener("input",(a=>{const n=a.target.dataset.value,o=a.target.value,c=n.replace("Timer","");if(!o.trim())return!1;e[c]=`${o.toString().padStart(2,"0")}:00`;const s=document.querySelector(`[data-timer-type="${c}"]`);t.push({...e}),localStorage.setItem("timers",JSON.stringify(t)),s&&!s.classList.contains(m)&&(s.innerText=e[c])})),function(){const a=t[t.length-1];for(let t in a){const n=document.querySelector(`[data-timer-type="${t}"]`);n&&(n.innerText=a[t],e[t]=a[t])}}()}));const o=document.querySelector(".activate-pomodoro"),c=document.querySelector("[data-choose]"),s=["pomodoro","short"];let r=0;function d(t){const a="string"==typeof t?t:t.target.dataset.type,n=document.querySelector(`[data-timer-type="${a}"]`);if(i.forEach((t=>t.classList.remove(u))),"string"!=typeof t)t.target.classList.add(u);else{const t=document.querySelector(`[data-type=${a}]`);t&&t.classList.add(u)}document.querySelectorAll("[data-timer]").forEach((t=>{t.classList.add(m)})),n&&(n.classList.remove(m),n.innerText=e[a],"pomodoro"===a?l.style.backgroundColor="var(--tomato)":"short"===a?l.style.backgroundColor="var(--backgroundShortBreak)":"long"===a&&(l.style.backgroundColor="var(--backgroundLongBreak)"))}!function(){const t=JSON.parse(localStorage.getItem("state"));t&&(t.divChooseActive?o.classList.add(u):o.classList.remove(u),t.chooseActive?c.classList.add(u):c.classList.remove(u))}(),o.addEventListener("click",(function(){o.classList.toggle(u),c.classList.toggle(u);const t={divChooseActive:o.classList.contains(u),chooseActive:c.classList.contains(u)};localStorage.setItem("state",JSON.stringify(t))})),i.length&&i[0].classList.add(u),i.forEach((t=>t.addEventListener("click",d))),a.addEventListener("click",(function(t){const c=document.querySelector("[data-timer]:not(.hidden)"),i=document.querySelector("[data-progress-bar]"),l=c.dataset.timerType,m=e[l];if(!n.isRunning&&0===n.totalSeconds){const[t,e]=c.innerText.split(":").map(Number);n.totalSeconds=60*t+e,n.tempoInicial=n.totalSeconds}n.isRunning?(n.isRunning=!1,clearInterval(n.interval),a.innerText="COMEÇAR",a.classList.remove(u)):(n.isRunning=!0,a.innerText="PAUSAR",a.classList.add(u),a.classList.remove("special-class"),n.interval=setInterval((()=>{if(n.totalSeconds<=0)return n.isRunning=!1,a.innerText="COMEÇAR",i.style.width="0",c.innerText=m,clearInterval(n.interval),void(o.classList.contains(u)&&(r++,r=r>=s.length?0:r,d(s[r]),a.classList.add("special-class")));const t=(n.tempoInicial-n.totalSeconds)/n.tempoInicial*100;i.style.width=`${t}%`,n.totalSeconds--;const e=Math.floor(n.totalSeconds/60),l=n.totalSeconds%60;c.innerText=`${e.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`}),50))}))}(),function(){const t=document.querySelectorAll("[data-toggle-drop]"),e=document.querySelectorAll("[data-drop] li"),a=t=>{const e=t.target.getAttribute("data-toggle-drop"),a=document.querySelector(`[data-drop="${e}"]`);a&&a.classList.toggle(u)};e.forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.closest("[data-drop]");if(!e)return;const a=e.getAttribute("data-drop"),n=document.querySelector(`[data-toggle-drop="${a}"]`);if(!n)return;const o=n?.querySelector(".format-innerText");o&&(o.innerText=t.target.innerText),document.querySelectorAll("[data-drop]").forEach((t=>{t.classList.contains(u)&&t.classList.remove(u)}))}))})),document.addEventListener("click",(t=>{let e=!1;document.querySelectorAll("[data-toggle-drop], [data-drop]").forEach((a=>{a.contains(t.target)&&(e=!0)})),e||document.querySelectorAll("[data-drop]").forEach((t=>{t.classList.remove(u)}))})),t.forEach((t=>{t.addEventListener("click",a)}))}();let g=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(g=t)}catch(t){console.error("Erro ao ler taskData",t)}!function(){const t=document.getElementById("task"),e=document.querySelector("textarea"),n=document.querySelector("[data-notes]"),o=document.querySelector("[data-add-tasks]"),c=document.querySelector(".inputTasks");function s(t=g){c.innerHTML="",t.forEach(((t,e)=>{const a=r(t.title,t.note,e,t.done);c.appendChild(a)})),l()}function r(t,e,a){const n=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),o=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),c=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),u=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./images/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),m=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),v=function(t,e){const a=document.createElement("div");return a.classList.add("activatedDivCheckBox"),a.setAttribute("role","checkbox"),a.setAttribute("aria-checked",g[t]?.done),g[t]?.done&&(a.setAttribute("aria-checked",a.classList.add("alternateStateCheckbox")),e.classList.add("alternateStateParagraph")),a.addEventListener("click",(()=>{a.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),g[t].done=a.classList.contains("alternateStateCheckbox"),function(){const t=g.every((t=>t.done));g.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),g.length=0,localStorage.setItem("tasksData",JSON.stringify([])),s()}),500)}(),function(){const t=[...g].sort(((t,e)=>t.done-e.done));g.length=0,g.push(...t),localStorage.setItem("tasksData",JSON.stringify(g)),s()}(),localStorage.setItem("tasksData",JSON.stringify(g))})),a}(a,o);return function(t,e,a,n,o,c){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),a=t.target;e&&e&&!e.contains(a)&&(i(e),d())})),t.addEventListener("click",(d=>{const u=document.querySelector(".activedDivDropDown");if(d.stopPropagation(),t.classList.toggle("scale-effect"),u)i(u);else{const d=document.createElement("div");d.classList.add("activedDivDropDown");const u=t.getBoundingClientRect();d.style.position="absolute",d.style.top=`${u.bottom+window.scrollY}px`;const[m,v,p]=function(t,e,a,n,o,c,l){const d=document.createElement("span");d.classList.add("edit"),d.innerText="Editar";const u=document.createElement("div");u.classList.add("divListEdit");const m=document.createElement("button");return m.type="button",m.classList.add("activatedButtonSave"),m.innerText="Salvar",u.appendChild(d),u.addEventListener("click",(()=>{const d=document.createElement("input");d.type="text",d.classList.add("activatedInputTasks"),d.value=g[t].title;const u=document.createElement("input");u.type="text",u.classList.add("activatedInputNote"),u.value=g[t].note,e.replaceWith(d),a.replaceWith(u),l.insertAdjacentElement("beforeend",m),i(o,n),m.addEventListener("click",(()=>{if(g[t].title=d.value,g[t].note=u.value,!g[t].title)return;localStorage.setItem("tasksData",JSON.stringify(g));const e=r(g[t].title,g[t].note,t);c.replaceWith(e),s()}))})),[d,u,m]}(e,a,n,t,d,o,c),[S,f]=function(t,e){const a=document.createElement("span");a.classList.add("remove"),a.innerText="Remover";const n=document.createElement("div");return n.classList.add("divListRemove"),n.appendChild(a),n.addEventListener("click",(()=>{g.splice(t,1),i(e),localStorage.setItem("tasksData",JSON.stringify(g)),s(),l()})),[a,n]}(e,d);d.append(v,f),document.body.appendChild(d)}}))}(u,a,o,c,n,m),m.append(v,o,u),n.append(m),e&&n.appendChild(c),n}const i=(t,e)=>{t?.remove(),e?.remove()};function l(){document.querySelector("[data-count]").innerText=g.length}function d(){document.querySelectorAll(".scale-effect").forEach((t=>{t.classList.remove("scale-effect")}))}function m(t){const e=t.classList.contains("active");t.classList.toggle("active",!e),t.classList.toggle("removeMenu",e)}n.addEventListener("click",(function(){e.classList.toggle(u)})),o.addEventListener("click",(function(){const a=t.value.trim(),n=e.value.trim();if(!a)return;const o={title:a,note:n,done:!1};g.push(o),localStorage.setItem("tasksData",JSON.stringify(g)),s(),t.value="",e.value=""})),document.querySelector(".menu [data-completed]").addEventListener("click",(()=>{const t=g.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),g.length=0,g.push(...t),m(a),d(),s()})),document.querySelector(".menu [data-remove-all]").addEventListener("click",(()=>{g.length=0,localStorage.setItem("tasksData",JSON.stringify(g)),m(a),d(),s()})),s()}()}));