(()=>{const t=document.querySelector(".modal"),e=document.querySelector(".configs"),a=document.querySelector(".menu"),n=document.querySelector(".add-list-tasks"),c=document.querySelector(".tasks"),s=document.querySelectorAll("[data-img-close]"),o=document.querySelector("[data-img-close='tasks']"),i=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),r=[t,e,a],l="active";!function(){function c(n){n&&n.preventDefault(),n.stopPropagation();const c=n.target;if(c.hasAttribute("data-modal")&&t.classList.add(l),c.hasAttribute("data-config")){e.classList.add(l),u();const t=window.matchMedia("(max-width: 1440px)");e.style.overflowY=t.matches?"scroll":"hidden"}c.closest("data-menu")&&(a.classList.toggle(l),i[2].classList.toggle("scale-effect"))}function d(a){const c=a.target.dataset.imgClose;"modal"===c?t.classList.remove(l):"configs"===c?e.classList.remove(l):(n.classList.remove(l),o.classList.toggle(l))}const u=()=>{document.querySelector("[data-close-configs]").addEventListener("click",(()=>{e.classList.remove(l)}),{once:!0})};i.forEach((t=>t.addEventListener("click",c))),document.addEventListener("click",(function(t){const e=t.target;r.forEach(((t,a)=>{e===t&&a<2&&t.classList.remove(l),2!==a||t.contains(e)||(t.classList.remove(l),i[2].classList.remove("scale-effect"))}))})),s.forEach((t=>t.addEventListener("click",d)))}(),function(){const t=document.querySelector("[data-img-close='tasks']");c.addEventListener("click",(function(){n.classList.toggle("active"),t.classList.toggle("active")}))}(),function(){const t=document.querySelectorAll(".div-clocks [data-type='pomodoro']"),e=document.querySelector("[data-timer]"),a=document.body;function n(n){t.forEach((t=>t.classList.remove("active"))),n.target.classList.add("active"),n.target.classList.contains("pomodoro-clock")&&(e.innerText="25:00",a.style.backgroundColor="var(--tomato)"),n.target.classList.contains("short-pause-pomodoro")&&(e.innerText="05:00",a.style.backgroundColor="var(--backgroundShortBreak)"),n.target.classList.contains("long-pause-pomodoro")&&(e.innerText="15:00",a.style.backgroundColor="var(--backgroundLongBreak)")}t.length&&t[0].classList.add("active"),t.forEach((t=>t.addEventListener("click",n)))}();let d=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(d=t)}catch(t){console.error("Erro ao ler taskData",t)}!function(){const t=document.getElementById("task"),e=document.querySelector("textarea"),n=document.querySelector("[data-notes]"),c=document.querySelector("[data-add-tasks]"),s=document.querySelector(".inputTasks");function o(t=d){s.innerHTML="",t.forEach(((t,e)=>{const a=i(t.title,t.note,e,t.done);s.appendChild(a)})),l()}function i(t,e,a){const n=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),c=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),s=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),m=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./images/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),v=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),g=function(t,e){const a=document.createElement("div");return a.classList.add("activatedDivCheckBox"),a.setAttribute("role","checkbox"),a.setAttribute("aria-checked",d[t]?.done),d[t]?.done&&(a.setAttribute("aria-checked",a.classList.add("alternateStateCheckbox")),e.classList.add("alternateStateParagraph")),a.addEventListener("click",(()=>{a.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),d[t].done=a.classList.contains("alternateStateCheckbox"),function(){const t=d.every((t=>t.done));d.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),d.length=0,localStorage.setItem("tasksData",JSON.stringify([])),o()}),500)}(),function(){const t=[...d].sort(((t,e)=>t.done-e.done));d.length=0,d.push(...t),localStorage.setItem("tasksData",JSON.stringify(d)),o()}(),localStorage.setItem("tasksData",JSON.stringify(d))})),a}(a,c);return function(t,e,a,n,c,s){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),a=t.target;e&&e&&!e.contains(a)&&(r(e),u())})),t.addEventListener("click",(u=>{const m=document.querySelector(".activedDivDropDown");if(u.stopPropagation(),t.classList.toggle("scale-effect"),m)r(m);else{const u=document.createElement("div");u.classList.add("activedDivDropDown");const m=t.getBoundingClientRect();u.style.position="absolute",u.style.top=`${m.bottom+window.scrollY}px`;const[v,g,p]=function(t,e,a,n,c,s,l){const u=document.createElement("span");u.classList.add("edit"),u.innerText="Editar";const m=document.createElement("div");m.classList.add("divListEdit");const v=document.createElement("button");return v.type="button",v.classList.add("activatedButtonSave"),v.innerText="Salvar",m.appendChild(u),m.addEventListener("click",(()=>{const u=document.createElement("input");u.type="text",u.classList.add("activatedInputTasks"),u.value=d[t].title;const m=document.createElement("input");m.type="text",m.classList.add("activatedInputNote"),m.value=d[t].note,e.replaceWith(u),a.replaceWith(m),l.insertAdjacentElement("beforeend",v),r(c,n),v.addEventListener("click",(()=>{if(d[t].title=u.value,d[t].note=m.value,!d[t].title)return;localStorage.setItem("tasksData",JSON.stringify(d));const e=i(d[t].title,d[t].note,t);s.replaceWith(e),o()}))})),[u,m,v]}(e,a,n,t,u,c,s),[f,L]=function(t,e){const a=document.createElement("span");a.classList.add("remove"),a.innerText="Remover";const n=document.createElement("div");return n.classList.add("divListRemove"),n.appendChild(a),n.addEventListener("click",(()=>{d.splice(t,1),r(e),localStorage.setItem("tasksData",JSON.stringify(d)),o(),l()})),[a,n]}(e,u);u.append(g,L),document.body.appendChild(u)}}))}(m,a,c,s,n,v),v.append(g,c,m),n.append(v),e&&n.appendChild(s),n}const r=(t,e)=>{t?.remove(),e?.remove()};function l(){document.querySelector("[data-count]").innerText=d.length}function u(){document.querySelectorAll(".scale-effect").forEach((t=>{t.classList.remove("scale-effect")}))}function m(t){const e=t.classList.contains("active");t.classList.toggle("active",!e),t.classList.toggle("removeMenu",e)}n.addEventListener("click",(function(){e.classList.toggle("active")})),c.addEventListener("click",(function(){const a=t.value.trim(),n=e.value.trim();if(!a)return;const c={title:a,note:n,done:!1};d.push(c),localStorage.setItem("tasksData",JSON.stringify(d)),o(),t.value="",e.value=""})),document.querySelector(".menu [data-completed]").addEventListener("click",(()=>{const t=d.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),d.length=0,d.push(...t),m(a),u(),o()})),document.querySelector(".menu [data-remove-all]").addEventListener("click",(()=>{d.length=0,localStorage.setItem("tasksData",JSON.stringify(d)),m(a),u(),o()})),o()}()})();