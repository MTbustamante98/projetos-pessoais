(()=>{const t=document.querySelector(".modal"),e=document.querySelector(".configs"),a=document.querySelector(".add-list-tasks"),n=document.querySelector(".menu"),c=document.querySelector("[data-img-close='tasks']"),s=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),o=document.querySelector(".tasks");!function(){const o=document.querySelectorAll("[data-img-close]"),i="active",r=[t,e,n];function l(a){a&&a.preventDefault(),a.stopPropagation();const c=a.target;c.hasAttribute("data-modal")&&t.classList.add(i),c.hasAttribute("data-config")&&e.classList.add(i),c.closest("[data-menu]")&&(n.classList.toggle(i),s[2].classList.toggle("scale-effect"))}function d(n){const s=n.target.dataset.imgClose;"modal"===s?t.classList.remove(i):"configs"===s?e.classList.remove(i):(a.classList.remove(i),c.classList.toggle(i))}s.forEach((t=>t.addEventListener("click",l))),document.addEventListener("click",(function(t){const e=t.target;r.forEach(((t,a)=>{e===t&&a<2&&t.classList.remove(i),2!==a||t.contains(e)||t.classList.remove(i)}))})),o.forEach((t=>t.addEventListener("click",d)))}(),function(){const t=document.querySelector("[data-img-close='tasks']");o.addEventListener("click",(function(){a.classList.toggle("active"),t.classList.toggle("active")}))}(),function(){const t=document.querySelectorAll(".div-clocks [data-type='pomodoro']"),e=document.querySelector("[data-timer]"),a=document.body;function n(n){t.forEach((t=>t.classList.remove("active"))),n.target.classList.add("active"),n.target.classList.contains("pomodoro-clock")&&(e.innerText="25:00",a.style.backgroundColor="#f3615c"),n.target.classList.contains("short-pause-pomodoro")&&(e.innerText="05:00",a.style.backgroundColor="#38858A"),n.target.classList.contains("long-pause-pomodoro")&&(e.innerText="15:00",a.style.backgroundColor="#397097")}t.length&&t[0].classList.add("active"),t.forEach((t=>t.addEventListener("click",n)))}();let i=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(i=t)}catch(t){console.error("Erro ao ler taskData",t)}!function(){const t=document.getElementById("task"),e=document.querySelector("textarea"),a=document.querySelector("[data-notes]"),c=document.querySelector("[data-add-tasks]"),s=document.querySelector(".inputTasks");function o(t=i){s.innerHTML="",t.forEach(((t,e)=>{const a=r(t.title,t.note,e,t.done);s.appendChild(a)})),d()}function r(t,e,a){const n=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),c=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),s=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),u=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./imagens/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),m=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),g=function(t,e){const a=document.createElement("div");return a.classList.add("activatedDivCheckBox"),a.setAttribute("role","checkbox"),a.setAttribute("aria-checked",i[t]?.done),i[t]?.done&&(a.setAttribute("aria-checked",a.classList.add("alternateStateCheckbox")),e.classList.add("alternateStateParagraph")),a.addEventListener("click",(()=>{a.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),i[t].done=a.classList.contains("alternateStateCheckbox"),function(){const t=i.every((t=>t.done));i.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),i.length=0,localStorage.setItem("tasksData",JSON.stringify([])),o()}),500)}(),function(){const t=[...i].sort(((t,e)=>t.done-e.done));i.length=0,i.push(...t),localStorage.setItem("tasksData",JSON.stringify(i)),o()}(),localStorage.setItem("tasksData",JSON.stringify(i))})),a}(a,c);return function(t,e,a,n,c,s){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),a=t.target;e&&(e.contains(a)||l(e))})),t.addEventListener("click",(u=>{const m=document.querySelector(".activedDivDropDown");if(u.stopPropagation(),t.classList.toggle("scale-effect"),m)l(m);else{const u=document.createElement("div");u.classList.add("activedDivDropDown");const m=t.getBoundingClientRect();u.style.position="absolute",u.style.top=`${m.bottom+window.scrollY}px`;const[g,v,p]=function(t,e,a,n,c,s,d){const u=document.createElement("span");u.classList.add("edit"),u.innerText="Editar";const m=document.createElement("div");m.classList.add("divListEdit");const g=document.createElement("button");return g.type="button",g.classList.add("activatedButtonSave"),g.innerText="Salvar",m.appendChild(u),m.addEventListener("click",(()=>{const u=document.createElement("input");u.type="text",u.classList.add("activatedInputTasks"),u.value=i[t].title;const m=document.createElement("input");m.type="text",m.classList.add("activatedInputNote"),m.value=i[t].note,e.replaceWith(u),a.replaceWith(m),d.insertAdjacentElement("beforeend",g),l(c,n),g.addEventListener("click",(()=>{if(i[t].title=u.value,i[t].note=m.value,!i[t].title)return;localStorage.setItem("tasksData",JSON.stringify(i));const e=r(i[t].title,i[t].note,t);s.replaceWith(e),o()}))})),[u,m,g]}(e,a,n,t,u,c,s),[L,f]=function(t,e){const a=document.createElement("span");a.classList.add("remove"),a.innerText="Remover";const n=document.createElement("div");return n.classList.add("divListRemove"),n.appendChild(a),n.addEventListener("click",(()=>{i.splice(t,1),l(e),localStorage.setItem("tasksData",JSON.stringify(i)),o(),d()})),[a,n]}(e,u);u.append(v,f),document.body.appendChild(u)}}))}(u,a,c,s,n,m),m.append(g,c,u),n.append(m),e&&n.appendChild(s),n}function l(t,e){t?.remove(),e?.remove()}function d(){document.querySelector("[data-count]").innerText=i.length}function u(t){const e=t.classList.contains("active");t.classList.toggle("active",!e),t.classList.toggle("removeMenu",e)}a.addEventListener("click",(function(){e.classList.toggle("active")})),c.addEventListener("click",(function(){const a=t.value.trim(),n=e.value.trim();if(!a)return;const c={title:a,note:n,done:!1};i.push(c),localStorage.setItem("tasksData",JSON.stringify(i)),o(),t.value="",e.value=""})),document.querySelector(".menu [data-completed]").addEventListener("click",(()=>{const t=i.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),i.length=0,i.push(...t),u(n),o()})),document.querySelector(".menu [data-remove-all]").addEventListener("click",(()=>{i.length=0,localStorage.setItem("tasksData",JSON.stringify(i)),u(n),o()})),o()}()})();