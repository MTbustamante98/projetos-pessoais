(()=>{const t=document.querySelector(".modal"),e=document.querySelector(".configs"),a=document.querySelector(".menu"),n=document.querySelector(".add-list-tasks"),c=document.querySelector(".tasks"),o=document.querySelectorAll("[data-img-close]"),s=document.querySelector("[data-img-close='tasks']"),r=document.querySelectorAll("[data-modal], [data-config], [data-menu='button']"),i=document.body,l=[t,e,a],d="active";!function(){function c(n){n&&n.preventDefault(),n.stopPropagation();const c=n.target;if(c.hasAttribute("data-modal")&&t.classList.add(d),c.hasAttribute("data-config")){e.classList.add(d),u();const t=window.matchMedia("(max-width: 1440px)");e.style.overflowY=t.matches?"scroll":"hidden"}c.closest("data-menu")&&(a.classList.toggle(d),r[2].classList.toggle("scale-effect"))}function i(a){const c=a.target.dataset.imgClose;"modal"===c?t.classList.remove(d):"configs"===c?e.classList.remove(d):(n.classList.remove(d),s.classList.toggle(d))}const u=()=>{document.querySelector("[data-close-configs]").addEventListener("click",(()=>{e.classList.remove(d)}),{once:!0})};r.forEach((t=>t.addEventListener("click",c))),document.addEventListener("click",(function(t){const e=t.target;l.forEach(((t,a)=>{e===t&&a<2&&t.classList.remove(d),2!==a||t.contains(e)||(t.classList.remove(d),r[2].classList.remove("scale-effect"))}))})),o.forEach((t=>t.addEventListener("click",i)))}(),function(){const t=document.querySelector("[data-img-close='tasks']");c.addEventListener("click",(function(){n.classList.toggle("active"),t.classList.toggle("active")}))}(),function(){const t=document.querySelectorAll(".div-clocks [data-type]"),e="hidden",a={pomodoro:"25:00",short:"05:00",long:"15:00"};function n(n){const c=n.target.dataset.type,o=document.querySelector(`[data-timer-type="${c}"]`);t.forEach((t=>t.classList.remove("active"))),n.target.classList.add("active"),document.querySelectorAll("[data-timer]").forEach((t=>{t.classList.add(e)})),o&&(o.classList.remove(e),o.innerText=a[c],"pomodoro"===c?i.style.backgroundColor="var(--tomato)":"short"===c?i.style.backgroundColor="var(--backgroundShortBreak)":"long"===c&&(i.style.backgroundColor="var(--backgroundLongBreak)"))}t.length&&t[0].classList.add("active"),document.querySelectorAll(".select-time [data-value]").forEach((t=>{t.addEventListener("input",(t=>{const e=t.target.dataset.value,n=t.target.value,c=e.replace("Timer","");a[c]=`${n.toString().padStart(2,"0")}:00`;const o=document.querySelector(`[data-timer-type="${c}"]`);o&&(o.innerText=a[c])}))})),t.forEach((t=>t.addEventListener("click",n)))}();let u=[];try{const t=JSON.parse(localStorage.getItem("tasksData"))||[];Array.isArray(t)&&(u=t)}catch(t){console.error("Erro ao ler taskData",t)}!function(){const t=document.getElementById("task"),e=document.querySelector("textarea"),n=document.querySelector("[data-notes]"),c=document.querySelector("[data-add-tasks]"),o=document.querySelector(".inputTasks");function s(t=u){o.innerHTML="",t.forEach(((t,e)=>{const a=r(t.title,t.note,e,t.done);o.appendChild(a)})),l()}function r(t,e,a){const n=function(){const t=document.createElement("span");return t.classList.add("activatedSpan"),t}(),c=function(t){const e=document.createElement("p");return e.classList.add("activatedParagraph"),e.innerText=t,e}(t),o=function(t){const e=document.createElement("div");return e.classList.add("activatedDiv"),e.innerText=t,e}(e),m=function(){const t=document.createElement("button");t.type="button",t.classList.add("activatedEditAndSave");const e=document.createElement("img");return e.src="./images/three-points.svg",e.style.marginTop="2px",t.appendChild(e),t}(),v=function(){const t=document.createElement("div");return t.classList.add("wrapper"),t}(),g=function(t,e){const a=document.createElement("div");return a.classList.add("activatedDivCheckBox"),a.setAttribute("role","checkbox"),a.setAttribute("aria-checked",u[t]?.done),u[t]?.done&&(a.setAttribute("aria-checked",a.classList.add("alternateStateCheckbox")),e.classList.add("alternateStateParagraph")),a.addEventListener("click",(()=>{a.classList.toggle("alternateStateCheckbox"),e.classList.toggle("alternateStateParagraph"),u[t].done=a.classList.contains("alternateStateCheckbox"),function(){const t=u.every((t=>t.done));u.length>0&&t&&setTimeout((()=>{alert("Parabéns, você concluiu todas as tarefas!"),u.length=0,localStorage.setItem("tasksData",JSON.stringify([])),s()}),500)}(),function(){const t=[...u].sort(((t,e)=>t.done-e.done));u.length=0,u.push(...t),localStorage.setItem("tasksData",JSON.stringify(u)),s()}(),localStorage.setItem("tasksData",JSON.stringify(u))})),a}(a,c);return function(t,e,a,n,c,o){document.addEventListener("click",(t=>{const e=document.querySelector(".activedDivDropDown"),a=t.target;e&&e&&!e.contains(a)&&(i(e),d())})),t.addEventListener("click",(d=>{const m=document.querySelector(".activedDivDropDown");if(d.stopPropagation(),t.classList.toggle("scale-effect"),m)i(m);else{const d=document.createElement("div");d.classList.add("activedDivDropDown");const m=t.getBoundingClientRect();d.style.position="absolute",d.style.top=`${m.bottom+window.scrollY}px`;const[v,g,p]=function(t,e,a,n,c,o,l){const d=document.createElement("span");d.classList.add("edit"),d.innerText="Editar";const m=document.createElement("div");m.classList.add("divListEdit");const v=document.createElement("button");return v.type="button",v.classList.add("activatedButtonSave"),v.innerText="Salvar",m.appendChild(d),m.addEventListener("click",(()=>{const d=document.createElement("input");d.type="text",d.classList.add("activatedInputTasks"),d.value=u[t].title;const m=document.createElement("input");m.type="text",m.classList.add("activatedInputNote"),m.value=u[t].note,e.replaceWith(d),a.replaceWith(m),l.insertAdjacentElement("beforeend",v),i(c,n),v.addEventListener("click",(()=>{if(u[t].title=d.value,u[t].note=m.value,!u[t].title)return;localStorage.setItem("tasksData",JSON.stringify(u));const e=r(u[t].title,u[t].note,t);o.replaceWith(e),s()}))})),[d,m,v]}(e,a,n,t,d,c,o),[f,L]=function(t,e){const a=document.createElement("span");a.classList.add("remove"),a.innerText="Remover";const n=document.createElement("div");return n.classList.add("divListRemove"),n.appendChild(a),n.addEventListener("click",(()=>{u.splice(t,1),i(e),localStorage.setItem("tasksData",JSON.stringify(u)),s(),l()})),[a,n]}(e,d);d.append(g,L),document.body.appendChild(d)}}))}(m,a,c,o,n,v),v.append(g,c,m),n.append(v),e&&n.appendChild(o),n}const i=(t,e)=>{t?.remove(),e?.remove()};function l(){document.querySelector("[data-count]").innerText=u.length}function d(){document.querySelectorAll(".scale-effect").forEach((t=>{t.classList.remove("scale-effect")}))}function m(t){const e=t.classList.contains("active");t.classList.toggle("active",!e),t.classList.toggle("removeMenu",e)}n.addEventListener("click",(function(){e.classList.toggle("active")})),c.addEventListener("click",(function(){const a=t.value.trim(),n=e.value.trim();if(!a)return;const c={title:a,note:n,done:!1};u.push(c),localStorage.setItem("tasksData",JSON.stringify(u)),s(),t.value="",e.value=""})),document.querySelector(".menu [data-completed]").addEventListener("click",(()=>{const t=u.filter((t=>!t.done));localStorage.setItem("tasksData",JSON.stringify(t)),u.length=0,u.push(...t),m(a),d(),s()})),document.querySelector(".menu [data-remove-all]").addEventListener("click",(()=>{u.length=0,localStorage.setItem("tasksData",JSON.stringify(u)),m(a),d(),s()})),s()}()})();